---
import Layout from "../layouts/Layout.astro";
import Card from "@/components/ui/card.astro";
import FaqList from "@/components/shared/FaqList.astro";
import { getCollection } from "astro:content";

const allFaqs = [
  ...(await getCollection("faqs-hotel")),
  ...(await getCollection("faqs-remote")),
];

const sections = [...new Map(allFaqs.map((f) => [f.data.category, f.data.categoryName])).entries()];
---

<Layout title="FAQs â€“ ATmosphereConf 2026">
  {
    sections.map(([category, displayName]) => {
      const sectionFaqs = allFaqs.filter((f) => f.data.category === category);
      return (
        <section id={category} class="my-10">
          <Card class="px-6">
            <h2 class="font-mono text-lg uppercase tracking-widest font-semibold text-primary mb-3">
              <a href={`#${category}`} class="section-link hover:underline" data-section={category}>
                // {displayName.toLowerCase()}
              </a>
            </h2>
            <FaqList faqs={sectionFaqs} />
          </Card>
        </section>
      );
    })
  }
</Layout>
